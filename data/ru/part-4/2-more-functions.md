---
path: '/ru/part-4/2-more-functions'
title: 'Больше о функциях'
hidden: false
---

<text-box variant='learningObjectives' name="Цели обучения">

После изучения этого раздела

- Вы узнаете больше об аргументах и параметрах функций
- Вы узнаете, как возвращать значения из функций и как использовать эти значения в коде
- Вы сможете добавлять подсказки типов для параметров и возвращаемых значений

</text-box>

Давайте быстро повторим функции Python. Функции определяются с помощью ключевого слова `def`:

```python
def message():
    print("This message was brought to you by a function")
```

Эта функция может быть вызвана в коде вашей программы следующим образом:

```python
message()
```

Ваша программа затем напечатает

<sample-output>

This message was brought to you by a function

</sample-output>

## Параметры и аргументы функции

Функция может принимать один или несколько аргументов. Когда функция вызывается, аргументы присваиваются переменным, которые определены в определении функции. Эти переменные называются параметрами и перечисляются в круглых скобках после имени функции.

В следующем коде функция `greet` имеет один определенный параметр, а функция `sum` имеет два.

```python
def greet(name):
    print("Hello there,", name)

def sum(a, b):
    print("The sum of the arguments is", a + b)
```

```python
greet("Emily")
sum(2, 3)
```

<sample-output>

Hello there, Emily
The sum of the arguments is 5

</sample-output>

<text-box variant='hint' name='Формальный против фактического, параметр против аргумента'>

Терминология вокруг данных, передаваемых в функции, может показаться запутанной. Что еще хуже, некоторые источники называют то, что мы назвали параметрами и аргументами, _формальными_ и _фактическими параметрами_. Другие источники называют их _формальными_ и _фактическими аргументами_. [Документация Python](https://docs.python.org/3/glossary.html#term-argument) определяет только термины _аргумент_ и _параметр_, поэтому мы также будем использовать их.

Что на самом деле происходит при выполнении вызова функции `greet("Елена")`?

В определении функции `greet(name)` параметр `name` ведет себя во всех отношениях как обычная переменная. Мы можем использовать его внутри функции так же, как мы использовали переменные во многих основных функциях в наших программах до сих пор.

В вызове функции `greet("Елена")` аргумент `"Елена"` точно такая же строка, как и любые другие строки, с которыми мы сталкивались раньше. Например, мы можем присвоить его переменной.

Итак, когда выполняется вызов функции, значение аргумента, `"Елена"`, присваивается переменной параметра `name`. На время _этого выполнения_ функции `name = "Елена"`. Когда функция вызывается с другим аргументом, значение `name` будет другим.

Вся эта терминология может показаться излишней, но информатика как дисциплина стремится быть как можно более точной наукой. Использование четко определенной терминологии помогает.

</text-box>

## Сообщения об ошибках при выполнении тестов

Большинство упражнений в этом курсе имеют прикрепленные автоматические тесты. Если ваша программа не работает так, как указано в задании, тесты покажут сообщение об ошибке, которое может быть полезным или не очень. Обычно стоит внимательно прочитать сообщение об ошибке.

В некоторых ситуациях сообщение об ошибке может не сказать вам очень много. В следующем упражнении ниже вы можете столкнуться с этим сообщением об ошибке:

<img src="../../part-4/4_2_1.png">

Сообщение просто говорит, что вы должны иметь возможность вызвать функцию `line` с указанными аргументами:
```python
line(5, "")
```

Фактическая проблема становится ясной, когда мы пытаемся выполнить вызов функции, указанный в сообщении об ошибке. Вы можете сделать это, скопировав вызов функции в вашу программу и нажав на треугольник:

<img src="../../part-4/4_2_2.png">

Последние строки, произведенные выполнением и выделенные на изображении выше, говорят нам, что строка 4 нашего кода вызывает ошибку _IndexError: string index out of range_. В [предыдущей части](/ru/part-3/2-working-with-strings) был похожий пример, где мы пытались использовать индекс, который выходил за рамки строки. На этот раз ошибка появляется, потому что мы пытаемся получить доступ к первому символу пустой строки, то есть строки длиной 0.

<programming-exercise name='Line' tmcname='part04-02_line' title='Линия'>

Пожалуйста, напишите функцию с именем `line`, которая принимает два аргумента: целое число и строку. Функция печатает строку текста, длина которой определяется первым аргументом. Символ, используемый для рисования линии, должен быть первым символом второго аргумента. Если второй аргумент является пустой строкой, линия должна состоять из звездочек.

Пример ожидаемого поведения:

```python
line(7, "%")
line(10, "LOL")
line(3, "")
```

<sample-output>

<pre>
%%%%%%%
LLLLLLLLLL
***
</pre>

</sample-output>

</programming-exercise>

## Вызовы функций внутри вызовов функций

Вы можете вызвать функцию изнутри другой функции. Фактически, мы делали это много раз раньше, когда вызывали функцию `print` внутри наших собственных функций в предыдущей части. Наши собственные функции функционально ничем не отличаются. В следующем примере функция `greet_many_times` вызывает функцию `greet` столько раз, сколько указано аргументом `times`:

```python
def greet(name):
    print("Hello there,", name)

def greet_many_times(name, times):
    while times > 0:
        greet(name)
        times -= 1

greet_many_times("Emily", 3)
```

<sample-output>

Hello there, Emily
Hello there, Emily
Hello there, Emily

</sample-output>

<programming-exercise name='A box of hashes' tmcname='part04-03_box_of_hashes' title='Коробка решеток'>

Пожалуйста, напишите функцию с именем `box_of_hashes`, которая печатает прямоугольник из символов решетки. Функция принимает один аргумент, который определяет высоту прямоугольника. Прямоугольник должен быть шириной в десять символов.

Функция должна вызывать функцию `line` из упражнения выше для фактической печати. Скопируйте ваше решение этого упражнения выше кода для этого упражнения. Пожалуйста, не изменяйте ничего в вашей функции `line`.

Некоторые примеры того, как должна работать функция:

```python
box_of_hashes(5)
print()
box_of_hashes(2)
```

<sample-output>

<pre>
##########
##########
##########
##########
##########

##########
##########
</pre>

</sample-output>

</programming-exercise>

<programming-exercise name='A square of hashes' tmcname='part04-04_square_of_hashes' title='Квадрат решеток'>

Пожалуйста, напишите функцию с именем `square_of_hashes`, которая рисует квадрат из символов решетки. Функция принимает один аргумент, который определяет длину стороны квадрата.

Функция должна вызывать функцию `line` из упражнения выше для фактической печати. Скопируйте ваше решение этого упражнения выше кода для этого упражнения. Пожалуйста, не изменяйте ничего в функции `line`.

Некоторые примеры:

```python
square_of_hashes(5)
print()
square_of_hashes(3)
```

<sample-output>

<pre>
#####
#####
#####
#####
#####

###
###
###
</pre>

</sample-output>

</programming-exercise>

<programming-exercise name='A square' tmcname='part04-05_square' title='Квадрат'>

Пожалуйста, напишите функцию с именем `square`, которая печатает квадрат из символов и принимает два аргумента. Первый параметр определяет длину стороны квадрата. Второй параметр определяет символ, используемый для рисования квадрата.

Функция должна вызывать функцию `line` из упражнения выше для фактической печати. Скопируйте ваше решение этого упражнения выше кода для этого упражнения. Пожалуйста, не изменяйте ничего в функции `line`.

Некоторые примеры:

```python
square(5, "*")
print()
square(3, "o")
```

<sample-output>

<pre>
*****
*****
*****
*****
*****

ooo
ooo
ooo
</pre>

</sample-output>

</programming-exercise>

<programming-exercise name='A triangle' tmcname='part04-06_triangle' title='Треугольник'>

Пожалуйста, напишите функцию с именем `triangle`, которая рисует треугольник из решеток и принимает один аргумент. Треугольник должен быть такой же высокий и широкий, как значение аргумента.

Функция должна вызывать функцию `line` из упражнения выше для фактической печати. Скопируйте ваше решение этого упражнения выше кода для этого упражнения. Пожалуйста, не изменяйте ничего в функции `line`.

Некоторые примеры:

```python
triangle(6)
print()
triangle(3)
```

<sample-output>

<pre>
#
##
###
####
#####
######

#
##
###
</pre>

</sample-output>

</programming-exercise>

<programming-exercise name='A shape' tmcname='part04-07_shape' title='Фигура'>

Пожалуйста, напишите функцию с именем `shape`, которая принимает четыре аргумента. Первые два параметра определяют треугольник, как указано выше, и символ, используемый для его рисования. Первый параметр также определяет ширину прямоугольника, а третий параметр определяет его высоту. Четвертый параметр определяет символ заполнения прямоугольника. Функция сначала печатает треугольник, а затем прямоугольник под ним.

Функция должна вызывать функцию `line` из упражнения выше для фактической печати. Скопируйте ваше решение этого упражнения выше кода для этого упражнения. Пожалуйста, не изменяйте ничего в функции `line`.

Некоторые примеры:

```python
shape(5, "X", 3, "*")
print()
shape(2, "o", 4, "+")
print()
shape(3, ".", 0, ",")
```

<sample-output>

<pre>
X
XX
XXX
XXXX
XXXXX
*****
*****
*****

o
oo
++
++
++
++

.
..
...
</pre>

</sample-output>

**Подсказка**

Не пытайтесь решить это упражнение "за один раз". Хорошим первым шагом было бы убедиться, что вы можете надежно печатать треугольник. Затем вы можете попытаться добавить прямоугольник.

Это один из важнейших навыков программиста: **сосредотачиваться на небольших, осязаемых разделах проблемы за раз**. Решайте и проверяйте частичные решения и используйте их для построения полного решения.

</programming-exercise>

<programming-exercise name='A spruce' tmcname='part04-08_spruce' title='Елка'>

Пожалуйста, напишите функцию с именем `spruce`, которая принимает один аргумент. Функция печатает текст `елка!`, а затем елку, размер которой определяется аргументом.

Вызов `spruce(3)` должен напечатать

<sample-output>

<pre>
a spruce!
  *
 ***
*****
  *
</pre>

</sample-output>

Вызов `spruce(5)` должен напечатать

<sample-output>

<pre>
a spruce!
    *
   ***
  *****
 *******
*********
    *
</pre>

</sample-output>

**Примечание: слева от елки должно быть ровно нужное количество пробелов**. Если форма елки выглядит правильно, но левый край дерева не касается левого края текстовой области в терминале, тесты не примут решение.

</programming-exercise>

## Возвращаемое значение функции

Функции также могут возвращать значения. Например, встроенная функция Python `input` _возвращает_ входную строку, введенную пользователем. Значение, возвращаемое функцией, может быть сохранено в переменной:

```python
word = input("Please type in a word: ")
```

Когда вам нужно целочисленное значение от пользователя, ввод пользователя должен быть преобразован в целое число. Функция, которую мы использовали для этой цели, это `int`, и она также возвращает значение:

```python
number = int(input("Please type in an integer: "))
```

Функция `int` принимает строку, возвращенную `input`, в качестве своего аргумента и возвращает значение типа integer, если из строки можно разобрать целое число.

## Оператор return

Функции, которые вы определяете сами, также могут возвращать значения. Для этого вам нужен оператор `return`. Например, следующая функция `my_sum` возвращает сумму своих параметров:

```python
def my_sum(a, b):
    return a + b

result = my_sum(2, 3)

print("Sum:", result)
```

<sample-output>

Sum: 5

</sample-output>

Вот еще один пример возвращаемого значения. Эта функция спрашивает имя пользователя и возвращает строку, которую вводит пользователь:

```python
def ask_for_name():
    name = input("What is your name? ")
    return name

name = ask_for_name()
print("Hello there,", name)
```

<sample-output>

What is your name? **Anna**
Hello there, Anna

</sample-output>

Оператор `return` немедленно завершает выполнение функции. Следующее является изящным способом создания функции сравнения:

```python
def smallest(a,b):
    if a < b:
        return a
    return b

print(smallest(3, 7))
print(smallest(5, 2))
```

Идея здесь в том, что если `a` меньше, чем `b`, функция возвращает `a` и немедленно завершается. Если нет, выполнение продолжается до следующей строки, где возвращается значение `b`. Функция никогда не может выполнить два отдельных оператора `return` при одном вызове функции.

<sample-output>

3
2

</sample-output>

Вы можете использовать оператор `return`, даже если функция не возвращает значение. Его цель тогда - завершить выполнение функции:

```python
def greet(name):
    if name == "":
        print("???")
        return
    print("Hello there,", name)

greet("Emily")
greet("")
greet("Mark")
```

Если аргумент (который сохраняется в переменной `name`) является пустой строкой, функция печатает `???` и завершается.

<sample-output>

Hello there, Emily
???
Hello there, Mark

</sample-output>

## Использование возвращаемых значений функций

Мы уже знаем, что возвращаемые значения функций могут быть сохранены в переменных:

```python
def my_sum(a, b):
    return a + b

result = my_sum(4, 6)
print("The sum is", result)
```

<sample-output>

The sum is 10

</sample-output>

Возвращаемое значение функции - это значение, как и любое другое. Нет необходимости сохранять его в переменной, чтобы передать в качестве аргумента команде `print`:

```python
print("The sum is", my_sum(4, 6))
```

Возвращаемое значение функции может стать аргументом другой функции:

```python
def my_sum(a, b):
    return a+b

def difference(a, b):
    return a-b

result = difference(my_sum(5, 2), my_sum(2, 3))
print("The result is", result)
```

<sample-output>

The result is 2

</sample-output>

В этом случае внутренние вызовы функций `my_sum(5, 2)` и `my_sum(2, 3)` выполняются первыми. Значения, которые они возвращают (7 и 5), используются как аргументы внешнего вызова функции.

Внешний вызов функции `difference(7, 5)` возвращает значение 2, которое сохраняется в переменной `result` и печатается.

В заключение, значения, возвращаемые функциями, работают точно как любые другие значения в Python. Их можно печатать, сохранять в переменных, использовать в выражениях и использовать как аргументы в других вызовах функций.

## Разница между return и print

Иногда разница между функцией, _возвращающей_ значение, и _оператором print_ внутри функции может быть запутанной. Давайте посмотрим на два разных способа реализации функции для определения, какое из двух значений больше:

```python
def max1(a, b):
    if a > b:
        return a
    else:
        return b

def max2(a, b):
    if a > b:
        print(a)
    else:
        print(b)

result = max1(3, 5)
print(result)

max2(7, 2)
```

<sample-output>

5
7

</sample-output>

Обе версии, кажется, работают нормально, поскольку максимальные значения печатаются правильно. Однако между ними есть фундаментальная разница. Первая из двух функций, `max1`, не печатает ничего сама по себе, а вместо этого _возвращает_ значение, которое больше. Если мы выполним следующую строку

```python
max1(3, 5)
```

кажется, что ничего не происходит. Возвращаемое значение функции должно быть каким-то образом _использовано_ в коде, который вызвал функцию. Например, оно может быть сохранено в переменной и напечатано:

```python
result = max1(3, 5)
print(result)
```

Вторая версия, `max2`, использует команду `print` _внутри функции_ для печати большего значения. Если мы хотим увидеть значение, достаточно вызвать функцию

```python
max2(7, 5)
```

и большее значение печатается. Недостаток этой удобной функции в том, что значение, вычисленное функцией, недоступно для использования в программе, которая ее вызвала. Вот почему функции, возвращающие значения, часто являются лучшим вариантом.

<programming-exercise name='The greatest number' tmcname='part04-09_greatest_number' title='Наибольшее число'>

Пожалуйста, напишите функцию с именем `greatest_number`, которая принимает три аргумента. Функция возвращает наибольшее по значению из трех.

Пример использования функции:

```python
print(greatest_number(3, 4, 1)) # 4
print(greatest_number(99, -4, 7)) # 99
print(greatest_number(0, 0, 0)) # 0
```

</programming-exercise>

<programming-exercise name='Same characters' tmcname='part04-10_same_characters' title='Одинаковые символы'>

Пожалуйста, напишите функцию с именем `same_chars`, которая принимает одну строку и два целых числа в качестве аргументов. Целые числа относятся к индексам внутри строки. Функция должна вернуть `True`, если два символа по указанным индексам одинаковы. В противном случае, и особенно если любой из индексов выходит за пределы строки, функция возвращает `False`.

Некоторые примеры использования функции:

```python
# same characters m and m
print(same_chars("programmer", 6, 7)) # True

# different characters p and r
print(same_chars("programmer", 0, 4)) # False

# the second index is not within the string
print(same_chars("programmer", 0, 12)) # False
```

</programming-exercise>

<programming-exercise name='First, second and last words' tmcname='part04-11_first_second_last' title='Первое, второе и последнее слова'>

Пожалуйста, напишите три функции: `first_word`, `second_word` и `last_word`. Каждая функция принимает строковый аргумент.

Как следует из их названий, функции возвращают либо первое, либо второе, либо последнее слово в предложении, которое они получают в качестве своего строкового аргумента.

В каждом случае вы можете предположить, что строка аргумента содержит как минимум два отдельных слова, и все слова разделены ровно одним пробелом. Не будет пробелов в начале или в конце строк аргументов.

```python
sentence = "it was a dark and stormy python"

print(first_word(sentence)) # it
print(second_word(sentence)) # was
print(last_word(sentence)) # python
```

<sample-output>

it
was
python

</sample-output>

```python
sentence = "it was"

print(second_word(sentence)) # was
print(last_word(sentence)) # was
```

</programming-exercise>

## Тип аргумента

Быстрое повторение типов данных, с которыми мы встречались до сих пор:

Тип          | Тип данных Python | Пример
:-------------|:----------------:|------
целое число   | `int`            | `23`
число с плавающей точкой | `float`  | `-0.45`
строка        | `str`            | `"Петр Питон"`
логическое значение | `bool`     | `True`

Когда вы вызываете функцию, она будет работать правильно только если аргументы, которые вы ей даете, правильного типа. Давайте посмотрим на пример:

```python
def print_many_times(message, times):
    while times > 0:
        print(message)
        times -= 1
```

Функция работает как ожидается, если мы вызовем ее таким образом:

```python
print_many_times("Hello there", 5)
```

<sample-output>

Hello there
Hello there
Hello there
Hello there
Hello there

</sample-output>

Однако, если мы дадим функции аргумент неправильного типа, она не будет работать:

```python
print_many_times("Hello there", "Emily")
```

<sample-output>

TypeError: '>' not supported between instances of 'str' and 'int'

</sample-output>

Проблема здесь в том, что второй параметр `times` сравнивается с целым числом, `0`, на строке 2 определения функции. Данный аргумент был `"Елена"`, который является строкой, а не целым числом. Строки и целые числа нельзя сравнивать так просто, поэтому возникает ошибка.

Чтобы избежать подобных проблем, вы можете включить _подсказки типов_ в определения ваших функций. Подсказка типа определяет тип аргумента, предназначенного для функции:

```python
def print_many_times(message : str, times : int):
    while times > 0:
        print(message)
        times -= 1
```

Это говорит любому, кто использует функцию, что аргумент, хранящийся в `message`, должен быть строкой, а аргумент, хранящийся в `times`, должен быть целым числом.

Аналогично, возвращаемое значение функции может иметь подсказку в определении функции:

```python
def ask_for_name() -> str:
    name = input("Как вас зовут? ")
    return name
 ```

Это говорит пользователю функции, что функция должна возвращать строку.

**Примечание:** Подсказки типов - это буквально только подсказки о типе аргумента или возвращаемого значения. Это не гарантия типа и определенно не защита от ошибок типов. Если функция получает аргумент или возвращает значение неправильного типа, функция все равно выполняется, но может работать неправильно.

<!---
A quiz to review the contents of this section:

<quiz id="fb289a3b-288a-5a9f-b3d2-07ceae5866ea"></quiz>
-->