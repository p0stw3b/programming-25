---
path: '/ru/part-3/1-loops-with-conditions'
title: 'Циклы с условиями'
hidden: false
---

<text-box variant='learningObjectives' name="Цели обучения">

После изучения этого раздела

- Вы узнаете, как создать цикл while с условием
- Вы поймёте, какую роль играют инициализация, формулирование условия и обновление переменных в цикле
- Вы сможете создавать циклы с различными типами условий

</text-box>

<!--тот же текст находится в разделах 3-1, 5-1 и 6-1, проверьте их все, если изменяете этот текст-->
<text-box variant='hint' name="Об упражнениях в этом курсе">

Чтобы стать опытным программистом, требуется много практики, иногда даже довольно механической. Это также включает развитие навыков решения проблем и применение интуиции. Поэтому в этом курсе есть много упражнений разных типов. Некоторые из них требуют довольно прямолинейного применения того, что вы изучили в материале, но некоторые намеренно более сложные и открытые.

Некоторые упражнения могут поначалу показаться чрезмерно сложными, но это не повод для беспокойства. Ни одно из упражнений не является строго обязательным, и фактически _вам нужно получить только 25% баллов из каждой части, чтобы пройти курс_. Более подробную информацию о прохождении курса вы можете найти на [странице об оценках](/ru/grading-and-exams).

**Упражнения не расположены в каком-либо конкретном порядке сложности.** В каждом разделе обычно вводятся новые концепции программирования, которые затем отрабатываются как с помощью простых, так и более сложных упражнений. **Если вы сталкиваетесь с упражнением, которое кажется слишком сложным, переходите к следующему.** Вы всегда можете вернуться к более сложным упражнениям, если у вас будет время позже.

Когда дела неизбежно становятся трудными, слово утешения: задача, которая кажется невозможно сложной на этой неделе, вероятно, покажется довольно лёгкой примерно через четыре недели.

</text-box>

В предыдущем разделе мы научились использовать цикл `while True` для повторения фрагментов кода. В этой конструкции условие цикла — `True`, поэтому условие выполняется каждый раз. Нам нужно было каждый раз явно выходить из цикла, чтобы избежать бесконечного цикла. Например:

```python
# Print numbers until the variable a equals 5
a = 1
while True:
    print(a)
    a += 1
    if a == 5:
        break
```

<sample-output>

1
2
3
4

</sample-output>

Конечно, условие не всегда должно быть `True`, вместо этого в качестве условия можно использовать любое логическое выражение. Общая структура оператора `while` выглядит следующим образом:

```python
while <condition>:
    <block>
```

Идея здесь заключается в том, что выполнение идёт туда и обратно, проверяя, истинно ли условие, и выполняя код внутри блока снова и снова. Если условие в какой-то момент становится ложным, выполнение программы продолжается со строки после блока `while`.

<img src="../../part-3/3_1_1.png">

В следующем цикле у нас есть условие `number < 10`. Блок внутри цикла выполняется, только если переменная number меньше 10.

```python
number = int(input("Please type in a number: "))

while number < 10:
    print(number)
    number += 1

print("Execution finished.")
```

Это может вывести:

<sample-output>

Please type in a number: **4**
4
5
6
7
8
9
Execution finished.

</sample-output>

В этой структуре условие всегда проверяется перед выполнением блока внутри цикла. Может случиться так, что блок никогда не выполнится, как здесь:

<sample-output>

Please type in a number: **12**
Execution finished.

</sample-output>

12 не меньше 10, поэтому программа не выводит ни одного числа.

## Инициализация, условие и обновление

Чтобы создать цикл, часто нужно включить три различных шага: инициализацию, условие и обновление переменных итерации.

_Инициализация_ относится к установке начального значения(значений) переменной(переменных), используемых в условии цикла. Их часто называют переменными итерации или итераторами. Это выполняется перед первым входом в цикл. _Условие_ определяет, как долго должен выполняться цикл. Оно устанавливается в самом начале цикла. Наконец, в каждом повторении цикла переменные, участвующие в условии, _обновляются_, так что каждая итерация приближает цикл на один шаг к его завершению. Следующее изображение иллюстрирует эти шаги:

<!--- это здесь на случай, если следующее изображение нужно обновить
```python
# Ask the user for a number
number = int(input("Please type in a number: "))

# Repeat while the number is less than 10
while number < 10:

    # Print out and increment
    print(number)
    number += 1

print("Execution finished.")
```
-->
<img src="../../part-3/3_1_2.png">

Если любой из этих трёх компонентов отсутствует, цикл, вероятно, не будет работать правильно. Типичная ошибка — пропуск шага обновления:

```python
number = 1

while number < 10:
    print(number)

print("Execution finished.")
```

Здесь значение переменной `number` никогда не изменяется. Программа зависает в бесконечном цикле, и один и тот же фрагмент кода повторяется снова и снова, пока пользователь не остановит выполнение, например, нажав `Control` + `C`:

<sample-output>

1
1
1
1
1
(continued ad infinitum...)

</sample-output>

<in-browser-programming-exercise name="Печать чисел" tmcname="part03-01_print_numbers" title="Печать чисел">

Пожалуйста, напишите программу, которая выводит все чётные числа от двух до тридцати, используя цикл. Выведите каждое число на отдельной строке.

Начало вашего вывода должно выглядеть так:

<sample-output>
2
4
6
8
etc...
</sample-output>

</in-browser-programming-exercise>


<in-browser-programming-exercise name="Исправьте код: Обратный отсчёт" tmcname="part03-02_countdown" title="Исправьте код: Обратный отсчёт">

В программе ниже есть синтаксические проблемы:

```python
print("Are you ready?")
number = int(input("Please type in a number: "))
while number = 0:
print(number)
print("Now!")
```

Пожалуйста, исправьте её так, чтобы она выводила следующее:

<sample-output>

Are you ready?
Please type in a number: **5**
5
4
3
2
1
Now!

</sample-output>

Это упражнение похоже на упражнение с обратным отсчётом в прошлом разделе, но на этот раз, пожалуйста, не используйте цикл `while True`!


</in-browser-programming-exercise>

## Написание условий

Любое логическое выражение или их комбинация является допустимым условием в цикле. Например, следующая программа выводит каждое третье число, но только пока число меньше 100 и не делится на 5:

```python
number = int(input("Please type in a number: "))

while number < 100 and number % 5 != 0:
    print(number)
    number += 3
```

Два примера выполнения программы с разными входными данными:

<sample-output>

Please type in a number: **28**
28
31
34
37

</sample-output>

<sample-output>

Please type in a number: **96**
96
99

</sample-output>

Когда входное число 28, цикл завершается числом 37, потому что следующее число — 40, которое делится на 5. Когда входное число 96, цикл завершается числом 99, потому что следующее число — 102, которое не меньше 100.

Всякий раз, когда вы пишете цикл, вы должны убедиться, что выполнение цикла всегда когда-то закончится. Следующая программа либо завершается, либо нет, в зависимости от входных данных:

```python
number = int(input("Please type in a number: "))

while number != 10:
    print(number)
    number += 2
```

Если входное число чётное и равно 10 или меньше, цикл завершится:

<sample-output>

Please type in a number: **4**
4
6
8

</sample-output>

В любом другом случае цикл выполняется бесконечно, поскольку нет способа, чтобы переменная могла когда-либо стать равной 10. Например, 3 или 12 — это входные данные, которые приведут к бесконечному циклу.

<in-browser-programming-exercise name="Числа" tmcname="part03-03_numbers" title="Числа">

Пожалуйста, напишите программу, которая спрашивает у пользователя число. Затем программа выводит все целые числа больше нуля, но меньше введённого числа.

<sample-output>

Upper limit: **5**
1
2
3
4

</sample-output>

Пожалуйста, не используйте значение `True` в качестве условия вашего цикла `while` в этом упражнении!

</in-browser-programming-exercise>

## Советы по отладке

Представьте, что вы пишете какую-то более сложную программу, например, как в следующем упражнении _Степени двойки_. Первые попытки могут выглядеть так:

```python
limit = int(input("Upper limit:"))
number = 1
while number == limit:
   # more code
```

Здесь программа начинается с чтения входных данных и продолжается с наброском цикла и попыткой создать условие.

Вероятно, код не будет работать как задумано с первого раза. Возможно, его придётся тестировать десятки или даже сотни раз, прежде чем он заработает правильно.

Этот фрагмент кода всегда запрашивает ввод от пользователя, что делает его тестирование медленным и громоздким. Каждый раз при тестировании программы необходимо вводить данные.

Один из способов обойти это — "жёстко закодировать" входные данные во время тестирования:

```python
# let's hard-code the input value for testing
limit = 8 # int(input("Upper limit"))
number = 1
while number == limit:
   # more code 
```
Когда программа работает с одним жёстко закодированным входом, легко протестировать её с другими жёстко закодированными входными данными. Когда она работает правильно во всех случаях, её можно протестировать с вводом от пользователя.

Этот трюк работает со многими тестами, которыми оцениваются упражнения в этом курсе. Если тест говорит вам, что программа работает неправильно, когда входные данные, скажем, 42, этот ввод можно жёстко закодировать в программу, пока вы ищете источник ошибки:

```python
# the test said the program works incorrectly when the input is 42
limit = 42 # int(input("Upper limit"))
number = 1
while number == limit:
   # more code
```

Отладка с помощью операторов print упоминалась несколько раз в [предыдущей части](/ru/part-2) курса. Программы, которые вас просят написать, будут становиться всё сложнее по мере прохождения курса. Количество отладки, которую вам придётся делать, вероятно, увеличится соответственно. Распространённые причины ошибок заключаются в условиях, которые завершают циклы; они могут работать правильно для одних входных данных и не работать для других, и не всегда очевидно, почему так происходит.

Поэтому пришло время включить отладку с помощью операторов print в ваши программистские практики, если вы ещё этого не сделали. Вы можете найти инструкции по отладке в [первом](/ru/part-2/1-programming-terminology) и [четвёртом](/ru/part-2/4-simple-loops) разделах предыдущей части.

Помимо операторов print, есть много других инструментов, которые можно использовать для отладки. Один из них — [инструмент визуализации](http://www.pythontutor.com/visualize.html#mode=edit) на веб-сайте [Python Tutor](http://www.pythontutor.com/). Этот инструмент позволяет выполнять код строка за строкой и также показывает значения, хранящиеся в переменных на каждом шаге.

Слегка сломанный код из примера отладки в [предыдущем разделе](/ru/part-2/4-simple-loops) визуализирован с помощью Python Tutor на следующем изображении:

<img src="../../part-3/3_1_3.png">

Красная стрелка указывает, где в данный момент находится выполнение программы. Инструмент показывает, что было выведено до сих пор, а также показывает значение каждой переменной на каждом шаге. Выполнение продвигается построчно по мере нажатия _Next_.

Всё, что вам нужно сделать для использования инструмента визуализации, — это скопировать ваш код и вставить его в [окно кода](http://www.pythontutor.com/visualize.html#mode=edit) инструмента. У инструмента есть некоторые ограничения по сравнению с версией Python, используемой в этом курсе. Если вы сталкиваетесь с загадочными сообщениями об ошибках, возможно, лучше попробовать другой метод отладки.

Опытные программисты редко активно используют инструмент визуализации, но для новичка он может стать ценным помощником. В программировании как дисциплине мало места для удачи или случайности. Крайне важно, чтобы программист понимал, какие значения создаёт их код в любой момент выполнения. Если значения, хранящиеся в переменных, не такие, как ожидалось, в программе, скорее всего, есть ошибка.

Инструмент визуализации и операторы отладки print — оба отличные способы для программиста увидеть собственными глазами, что программа делает именно то, что от неё ожидалось.

<in-browser-programming-exercise name="Степени двойки" tmcname="part03-04_powers_of_two" title="Степени двойки">

Пожалуйста, напишите программу, которая просит пользователя ввести верхний предел. Затем программа выводит числа так, что каждое последующее число в два раза больше предыдущего, начиная с числа 1. То есть программа выводит степени двойки по порядку.

Выполнение программы завершается, когда следующее число для вывода будет больше предела, установленного пользователем. Числа больше предела выводиться не должны.

<sample-output>

Upper limit: **8**
1
2
4
8

</sample-output>

<sample-output>

Upper limit: **20**
1
2
4
8
16

</sample-output>

<sample-output>

Upper limit: **100**
1
2
4
8
16
32
64

</sample-output>

Пожалуйста, не используйте значение `True` в качестве условия вашего цикла `while` в этом упражнении!

**Что такое степени двойки?** Первая степень двойки — это число 1. Следующая — 1 умножить на 2, что равно 2. Следующая — 2 умножить на 2, что равно 4. Следующая — 4 умножить на 2, что равно 8, и так далее. Каждая степень в последовательности умножается на два для получения следующей.

</in-browser-programming-exercise>

<in-browser-programming-exercise name="Степени основания n" tmcname="part03-05_powers_of_base_n" title="Степени основания n">

Пожалуйста, измените программу из предыдущего упражнения так, чтобы пользователь также мог ввести основание, которое умножается (в предыдущей программе основанием всегда была 2).

<sample-output>

Upper limit: **27**
Base: **3**
1
3
9
27

</sample-output>

<sample-output>

Upper limit: **1234567**
Base: **10**
1
10
100
1000
10000
100000
1000000

</sample-output>

Пожалуйста, не используйте значение `True` в качестве условия вашего цикла `while` в этом упражнении!

</in-browser-programming-exercise>

<in-browser-programming-exercise name="Сумма последовательных чисел, версия 1" tmcname="part03-06_consecutive_sum_v1" title="Сумма последовательных чисел, версия 1">

Пожалуйста, напишите программу, которая просит пользователя ввести предел. Затем программа вычисляет сумму последовательных чисел (1 + 2 + 3 + ...), пока сумма не станет как минимум равной пределу, установленному пользователем. Программа должна работать следующим образом:

<sample-output>

Limit: **2**
3

</sample-output>

<sample-output>

Limit: **10**
10

</sample-output>

<sample-output>

Limit: **18**
21

</sample-output>

Если у вас возникают трудности с пониманием того, как рассчитывается желаемый результат, примеры вывода в следующем упражнении могут помочь. Вы можете предполагать, что число, введённое пользователем, всегда равно 2 или больше.

</in-browser-programming-exercise>

## Построение строк

В самой [первой неделе курса](/ru/part-1/2-information-from-the-user) мы узнали, что можно "строить" строки из коротких строк с помощью оператора `+`. Например, это допустимый код Python:

```python
words = "pride"
words = words + ", prejudice"
words = words + " and python"

print(words)
```

<sample-output>

pride, prejudice and python

</sample-output>

Оператор `+=` позволяет нам написать это немного более компактно:

```python
words = "pride"
words += ", prejudice"
words += " and python"

print(words)
```

Это также относится к f-строкам, которые могут пригодиться, если значения, хранящиеся в переменных, нужны как части результирующей строки. Например, это будет работать:

```python
course = "Introduction to Programming"
grade = 4

verdict = "You have received "
verdict += f"the grade {grade} "
verdict += f"from the course {course}"

print(verdict)
```

<sample-output>

You have received the grade 4 from the course Introduction to Programming

</sample-output>

В предыдущем упражнении вы вычисляли сумму последовательных чисел, всегда добавляя новое значение внутри цикла.

Точно такая же идея применяется и к строкам: вы можете добавлять новые части к строке внутри цикла. Эта техника должна быть полезна в следующем упражнении.

<in-browser-programming-exercise name="Сумма последовательных чисел, версия 2" tmcname="part03-07_consecutive_sum_v2" title="Сумма последовательных чисел, версия 2">

Пожалуйста, напишите новую версию программы из предыдущего упражнения. В дополнение к результату она также должна выводить выполненный расчёт:

<sample-output>

Limit: **2**
The consecutive sum: 1 + 2 = 3

</sample-output>

<sample-output>

Limit: **10**
The consecutive sum: 1 + 2 + 3 + 4 = 10

</sample-output>

<sample-output>

Limit: **18**
The consecutive sum: 1 + 2 + 3 + 4 + 5 + 6 = 21

</sample-output>

Вы можете предполагать, что число, введённое пользователем, всегда равно 2 или больше.

</in-browser-programming-exercise>

<!---
Викторина для повторения содержимого этого раздела:

<quiz id="900c0293-b14c-5736-b1a3-68d4fa01ac43"></quiz>
-->